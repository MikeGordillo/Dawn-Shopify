<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flickity/2.2.2/flickity.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/flickity/2.2.2/flickity.pkgd.min.js"></script>

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<section class="carousel section-{{ section.id }}-padding mens-landing-flickity" aria-label="carousel with tiles">
  <p class="sr-only">This is a carousel with tiles that activate modal dialogs. Use the previous and next buttons to navigate.</p>

  <!-- Previous button -->
  <button class="button is-control previous-button">
    <span aria-hidden="true"><img src="https://cdn.shopify.com/s/files/1/2665/0346/files/previous-material.svg?v=1657808067"></span>
    <span class="sr-only">Previous tiles</span>
  </button>

  <!-- Slide content -->
  <div class="tiles">
    <div class="carousel-container landing social-complete">
      <div class="ShopTheLook__Inner">
        <a class="ShopTheLook__Dot ShopTheLook__Dot--light" data-product-index="1" href="#carousel-cell2"></a>
        <a class="ShopTheLook__Dot ShopTheLook__Dot--light is-active" data-product-index="2" href="#carousel-cell1"></a>
        <img class="product-flick" src="https://cdn.shopify.com/s/files/1/0566/6393/3065/files/ugc_yotpo_8.png?v=1657229839" alt="Morgan">
      </div>
      <div id="right-side-cell">
        <div class="carousel" data-flickity='{ "hash": true }'>
          <div class="carousel-cell" id="carousel-cell1">
            {% render 'icon-heart' %}
            <img src="https://cdn.shopify.com/s/files/1/2665/0346/products/vital-fleece-pullover-hoodie-men-hoodies-sweatshirts-jackets-tlf-deep-navy-s-713279.jpg?v=1644419932&width=823" alt="Tempo Women's Shorts" />
            <div class="cell-product name"><span>Vital Fleece Pullover Hoodie</span>
              <span style="color:#868686">$58.00</span>
            </div>
            <div class="quick-buy-container">
              <div class="quick-buttons">
                <div class="quick-buy-container__size-buttons">

                  <button data-variant="39785913450698" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    XS
                  </button>

                  <button data-variant="39785913450698" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    S
                  </button>

                  <button data-variant="39785913516234" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    M
                  </button>

                  <button data-variant="39785913549002" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    L
                  </button>

                  <button data-variant="39785913581770" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    XL
                  </button>

                </div>
              </div>
            </div>
            <button id="add-to-cart-cart">Add to cart</button>
          </div>
          <div class="carousel-cell" id="carousel-cell2">
            {% render 'icon-heart' %}
                        <img src="https://cdn.shopify.com/s/files/1/2665/0346/products/tlf-element-shorts-men-shorts-tlf-maroon-s-902043.jpg?v=1597092071&width=823" alt="Tempo Women's Sports Bra" />
            <div class="cell-product name"><span>Element Shorts</span>
              <span style="color:#868686">$48.00</span>
            </div>
            <div class="quick-buy-container">
              <div class="quick-buttons">
                <div class="quick-buy-container__size-buttons">

                  <button data-variant="39785913450698" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    XS
                  </button>

                  <button data-variant="39785913450698" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    S
                  </button>

                  <button data-variant="39785913516234" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    M
                  </button>

                  <button data-variant="39785913549002" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    L
                  </button>

                  <button data-variant="39785913581770" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    XL
                  </button>

                </div>
              </div>
            </div>
            <button id="add-to-cart-cart">Add to cart</button>
          </div>
        </div>
      </div>
    </div>

        <div class="carousel-container landing social-complete">
      <div class="ShopTheLook__Inner">
        <a class="ShopTheLook__Dot ShopTheLook__Dot--light" data-product-index="1" href="#carousel-cell4"></a>
        <a class="ShopTheLook__Dot ShopTheLook__Dot--light is-active" data-product-index="2" href="#carousel-cell3"></a>
        <img class="product-flick" src="https://cdn.shopify.com/s/files/1/0566/6393/3065/files/ugc_yotpo_8.png?v=1657229839" alt="Morgan">
      </div>
      <div id="right-side-cell">
        <div class="carousel" data-flickity='{ "hash": true }'>
          <div class="carousel-cell" id="carousel-cell3">
            {% render 'icon-heart' %}
            <img src="https://cdn.shopify.com/s/files/1/2665/0346/products/vital-fleece-pullover-hoodie-men-hoodies-sweatshirts-jackets-tlf-deep-navy-s-713279.jpg?v=1644419932&width=823" alt="Tempo Women's Shorts" />
            <div class="cell-product name"><span>Vital Fleece Pullover Hoodie</span>
              <span style="color:#868686">$58.00</span>
            </div>
            <div class="quick-buy-container">
              <div class="quick-buttons">
                <div class="quick-buy-container__size-buttons">

                  <button data-variant="39785913450698" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    XS
                  </button>

                  <button data-variant="39785913450698" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    S
                  </button>

                  <button data-variant="39785913516234" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    M
                  </button>

                  <button data-variant="39785913549002" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    L
                  </button>

                  <button data-variant="39785913581770" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    XL
                  </button>

                </div>
              </div>
            </div>
            <button id="add-to-cart-cart">Add to cart</button>
          </div>
          <div class="carousel-cell" id="carousel-cell4">
            {% render 'icon-heart' %}
                        <img src="https://cdn.shopify.com/s/files/1/2665/0346/products/tlf-element-shorts-men-shorts-tlf-maroon-s-902043.jpg?v=1597092071&width=823" alt="Tempo Women's Sports Bra" />
            <div class="cell-product name"><span>Element Shorts</span>
              <span style="color:#868686">$48.00</span>
            </div>
            <div class="quick-buy-container">
              <div class="quick-buttons">
                <div class="quick-buy-container__size-buttons">

                  <button data-variant="39785913450698" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    XS
                  </button>

                  <button data-variant="39785913450698" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    S
                  </button>

                  <button data-variant="39785913516234" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    M
                  </button>

                  <button data-variant="39785913549002" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    L
                  </button>

                  <button data-variant="39785913581770" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    XL
                  </button>

                </div>
              </div>
            </div>
            <button id="add-to-cart-cart">Add to cart</button>
          </div>
        </div>
      </div>
    </div>

        <div class="carousel-container landing social-complete">
      <div class="ShopTheLook__Inner">
        <a class="ShopTheLook__Dot ShopTheLook__Dot--light" data-product-index="1" href="#carousel-cell6"></a>
        <a class="ShopTheLook__Dot ShopTheLook__Dot--light is-active" data-product-index="2" href="#carousel-cell5"></a>
        <img class="product-flick" src="https://cdn.shopify.com/s/files/1/0566/6393/3065/files/ugc_yotpo_8.png?v=1657229839" alt="Morgan">
      </div>
      <div id="right-side-cell">
        <div class="carousel" data-flickity='{ "hash": true }'>
          <div class="carousel-cell" id="carousel-cell5">
            {% render 'icon-heart' %}
            <img src="https://cdn.shopify.com/s/files/1/2665/0346/products/vital-fleece-pullover-hoodie-men-hoodies-sweatshirts-jackets-tlf-deep-navy-s-713279.jpg?v=1644419932&width=823" alt="Tempo Women's Shorts" />
            <div class="cell-product name"><span>Vital Fleece Pullover Hoodie</span>
              <span style="color:#868686">$58.00</span>
            </div>
            <div class="quick-buy-container">
              <div class="quick-buttons">
                <div class="quick-buy-container__size-buttons">

                  <button data-variant="39785913450698" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    XS
                  </button>

                  <button data-variant="39785913450698" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    S
                  </button>

                  <button data-variant="39785913516234" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    M
                  </button>

                  <button data-variant="39785913549002" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    L
                  </button>

                  <button data-variant="39785913581770" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    XL
                  </button>

                </div>
              </div>
            </div>
            <button id="add-to-cart-cart">Add to cart</button>
          </div>
          <div class="carousel-cell" id="carousel-cell6">
            {% render 'icon-heart' %}
                        <img src="https://cdn.shopify.com/s/files/1/2665/0346/products/tlf-element-shorts-men-shorts-tlf-maroon-s-902043.jpg?v=1597092071&width=823" alt="Tempo Women's Sports Bra" />
            <div class="cell-product name"><span>Element Shorts</span>
              <span style="color:#868686">$48.00</span>
            </div>
            <div class="quick-buy-container">
              <div class="quick-buttons">
                <div class="quick-buy-container__size-buttons">

                  <button data-variant="39785913450698" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    XS
                  </button>

                  <button data-variant="39785913450698" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    S
                  </button>

                  <button data-variant="39785913516234" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    M
                  </button>

                  <button data-variant="39785913549002" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    L
                  </button>

                  <button data-variant="39785913581770" data-cart-quantity="1" onclick="onQuickBuyButtonClicked(this)">
                    XL
                  </button>

                </div>
              </div>
            </div>
            <button id="add-to-cart-cart">Add to cart</button>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Next button -->
  <button class="button is-control next-button">
    <span aria-hidden="true"><img src="https://cdn.shopify.com/s/files/1/2665/0346/files/next-material.svg?v=1657808067"></span>
    <span class="sr-only">Next tiles</span>
  </button>
</section>

<!-- Quick view dialog - reused for each tile -->
<div class="dialog is-hidden" role="dialog" aria-modal="true">
  <div class="overlay">

  </div>
</div>

<style>
    @media screen and (min-width: 767px) and (max-width:1399px) {
   .section-template--15672514379972__16473717387c6b1126-padding {
    padding-bottom: 60px !important;
}
      a.ShopTheLook__Dot.ShopTheLook__Dot--light {
    left: 53% !important;
    top: 30% !important;
}
      a.ShopTheLook__Dot.ShopTheLook__Dot--light.is-active {
    left: 40% !important;
    top: 15% !important;
}
  .quick-buttons {
    width: 303px;
    margin: 0 auto;
}
  .carousel-cell, .carousel-cell img, #right-side-cell {
    max-width: 400px !important;
}
  }
@media only screen and (max-width: 1000px) {
    #right-side-cell {
    margin-top: 20px;
}
  .button.is-control {
    padding: 30px !important;
}
}
.mens-landing-flickity .previous-button {
  width: auto;
  height: 25px;
  background-repeat: no-repeat;
}
.mens-landing-flickity .next-button {
  width: auto;
  height: 25px;
  background-repeat: no-repeat;
}
ul.quick-buy-slider {
  padding-left: 0;
}
ul.quick-buy-slider li {
  display: inline-block;
  font-family: "Poppins", sans-serif;
  border: 1.5px solid #eaeaea;
  font-size: 16px;
  padding: 12px 0px;
  min-width: 40px;
  text-align: center;
  vertical-align: middle;
  line-height: 16px;
  margin: 0 5px;
}
.carousel {
  position: relative;
  height: 100%;
  max-width: 1065px;
  margin: 0 auto;
}

.button.is-control {
    background: 0;
    border: 0;
    z-index: 1;
    cursor: pointer;
    padding: 0;
}

.previous-button {
  position: absolute;
  left: 0;
}

.next-button {
  position: absolute;
  right: 0;
}

.tiles {
  height: auto;
  width: auto;
  text-align: center;
}

.flickity-enabled:focus {
  outline: none;
  box-shadow: none;
  outline-offset: unset;
}

.carousel-container.landing.social-complete {
  width: 100%;
}

#right-side-cell {
  display: inline-block;
  width: 50%;
  vertical-align: top;
}

.ShopTheLook__Inner {
  display: inline-block;
  vertical-align: top;
}

button.flickity-button {
  display: none;
}
@media only screen and (min-width: 750px) {
.button.is-control {
    top: 40%;
}
  a.ShopTheLook__Dot.ShopTheLook__Dot--light {
    left: 32%;
    top: 70%;
  }

  a.ShopTheLook__Dot.ShopTheLook__Dot--light.is-active {
    left: 42%;
    top: 39%;
  }
}

@media only screen and (max-width: 749px) {
  .button.is-control {
    top: 12%;
}
  .section-template--14959259549833__1654784466a2078541-padding {
    padding-bottom: 60px;
  }
  a.ShopTheLook__Dot.ShopTheLook__Dot--light.is-active {
    left: 55%;
    top: 14%;
  }
  a.ShopTheLook__Dot.ShopTheLook__Dot--light {
    left: 44%;
    top: 24%;
  }
}

a.ShopTheLook__Dot.is-active,
.supports-hover a.ShopTheLook__Dot:hover {
  transform: scale(1.5);
}

a.ShopTheLook__Dot {
  position: absolute;
  display: block;
  width: 16px;
  height: 16px;
  margin: -8px 0 0 -8px;
  background: #fff;
  border-radius: 100%;
  box-shadow: 0 1px 10px rgb(0 0 0 / 25%);
  cursor: pointer;
  z-index: 1;
  transform: scale(1);
  transition: transform 0.25s ease-in-out;
}

a.ShopTheLook__Dot.is-active::after {
  -webkit-animation: 1.4s shopTheLookDotKeyframe ease-in-out infinite;
  animation: 1.4s shopTheLookDotKeyframe ease-in-out infinite;
}

a.ShopTheLook__Dot::after {
  position: absolute;
  content: "";
  width: 40px;
  height: 40px;
  left: -12px;
  top: -12px;
  border-radius: 100%;
  background: rgba(255, 255, 255, 0.4);
}

@-webkit-keyframes shopTheLookDotKeyframe {
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.05);
  }

  100% {
    transform: scale(1);
  }
}

@keyframes shopTheLookDotKeyframe {
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.05);
  }

  100% {
    transform: scale(1);
  }
}

ol.flickity-page-dots {
  display: none;
}

.carousel-cell,
.carousel-cell img,
#right-side-cell {
  max-width: 292px;
}

.cell-product.name {
  display: flex;
  justify-content: space-between;
  padding-top: 12px;
  padding-bottom: 5px;
  text-align: left;
}

.cell-product.name span {
    font-family: "Roboto", sans-serif;
    font-size: 14px;
    display: block;
    padding-bottom: 7px;
}

button#add-to-cart-cart {
  font-size: 0.875em;
  letter-spacing: 0.01em;
  background: #2e2e2e;
  color: white;
  margin: 0 auto;
  border: none;
  border-radius: 50px;
  padding: 15px 28px;
  font-weight: 400;
  cursor: pointer;
  font-family: "Poppins", sans-serif;
}

.quick-buy-container {
  margin-bottom: 34px;
}

.quick-buy-container__size-buttons {
  display: flex;
  justify-content: space-between;
}

.quick-buy-container__size-buttons button {
  background-color: transparent;
  border: 1px solid #c8c8c8;
  width: 44px;
  height: 44px;
  font-size: 1em;
}
@media only screen and (max-width: 600px) {
  .quick-buttons {
    width: 80%;
    margin: auto;
}
  .carousel-cell,
  .carousel-cell img,
  #right-side-cell,
  .ShopTheLook__Inner,
  .ShopTheLook__Inner img {
    max-width: 100%;
    width: fit-content;
  }
  .ShopTheLook__Inner, #right-side-cell {
    padding: 0 10px;
}
  #right-side-cell {
    width: 100%;
    margin-top: 10px;
  }
}

@media only screen and (min-width: 601px) {
  .ShopTheLook__Inner {
    margin: 0 20px 0 0;
  }
  .ShopTheLook__Inner,
  .ShopTheLook__Inner img {
    max-width: 640px;
  }
}
@media screen and (min-width: 990px) {
.cell-product.name {
  flex-direction: column;
}
}
@media screen and (max-width: 989px) {
.cell-product.name {
  flex-direction: row;
}
}
</style>

<script src="https://unpkg.com/flickity-hash@1/hash.js"></script>

<script>
var $carousel;
var tilesContainer, tiles;
var previousButton, nextButton;
var dialog, dialogOverlay, dialogCloseButton, dialogOkButton;

// CSS variables with tile sizing parameters defined at :root
var tileWidth, tileMargin;
var leftMostTileIndex = 0;

window.addEventListener("DOMContentLoaded", function (e) {
  tileWidth = parseInt(
    getComputedStyle(document.documentElement).getPropertyValue("--tile-width")
  );
  tileMargin = parseInt(
    getComputedStyle(document.documentElement).getPropertyValue("--tile-margin")
  );

  tilesContainer = document.querySelector(".carousel .tiles");

  previousButton = document.querySelector(".carousel .previous-button");
  nextButton = document.querySelector(".carousel .next-button");

  dialog = document.querySelector(".dialog");
  dialogOverlay = dialog.querySelector(".overlay");
  dialogCloseButton = dialogOverlay.querySelector(".close-button");
  dialogOkButton = dialogOverlay.querySelector(".ok-button");

  /**
    Initialize Flickity with the recommended configuration options
  */
  $carousel = $(".carousel .tiles").flickity({
    // Default previous/next buttons are placed after the slides, so they are hard to find. They can't be moved using config options, so we'll need to create custom controls.
    prevNextButtons: false,

    // Disable keyboard navigation. Using the Left and Right arrow keys for navigation is not a problem, but this also makes the entire slide track focusable, which is awkward for keyboard-based users.
    accessibility: false,

    // Never use wrap-around with multiple visible slides. DOM order will not match visual appearance due to absolute positioning of slides.
    wrapAround: false,

    pageDots: false,
    cellAlign: "left",

    on: {
      ready: handleReady,
      settle: handleSettle
    }
  });

  // Go to the previous slide when the Previous button is activated
  previousButton.addEventListener("click", function (e) {
    $carousel.flickity("previous", true);
  });

  // Go to the next slide when the Next button is activated
  nextButton.addEventListener("click", function (e) {
    $carousel.flickity("next", true);
  });

  // Close the dialog when any of its interactive elements are activated
  dialogCloseButton.addEventListener("click", closeDialog);
  dialogOkButton.addEventListener("click", closeDialog);

  // Clicking anywhere outside the dialog content should close the dialog
  dialog.addEventListener("click", handleDialogClicks);
  dialog.addEventListener("keydown", handleDialogKeypresses);
});

/**
  When Flickity is initialized, tweak the focusable track, fully hide all non-visible slides, and set up click handlers on all tiles to launch the dialog.
*/
function handleReady() {
  // Retrieve references to the most up-to-date elements
  tiles = document.querySelectorAll(".carousel .tiles .tile");

  // Add instructive ARIA label to the focusable track
  tilesContainer.setAttribute(
    "aria-label",
    "Track of tiles. Use arrow keys to navigate."
  );

  // Activating any tile should launch the quick view modal
  tiles.forEach(function (tile) {
    tile.addEventListener("click", openDialog);
  });

  // Ensure that all the non-visible slides are fully hidden
  hideNonVisibleTiles();
}

/**
  After a transition is complete, make sure all non-visible slides are fully hidden, and all visible content is operable
*/
function handleSettle(index) {
  leftMostTileIndex = index;

  // Ensure that all the non-visible slides are fully hidden
  hideNonVisibleTiles();

  // Allow interactive elements on the new current slide to receive keyboard focus
  tiles[index].querySelectorAll("a, button").forEach(function (element) {
    element.removeAttribute("tabindex");
  });
}

/**
  Fully hide non-visible slides for all users when they exit the view.
*/
function hideNonVisibleTiles() {
  // Start by hiding all tiles from screen reader and keyboard users
  tiles.forEach(function (tile) {
    tile.setAttribute("aria-hidden", true);
    tile.setAttribute("tabindex", -1);
  });

  // Figure out how many slides are visible (or partially visible)
  var containerWidth = $(tilesContainer).width();

  // How many tiles can fit into this container (including partially visible ones)?
  // NOTE: this method assumes a constant slide width. Update as needed if you want to support variable slide width.
  var numVisibleTiles = Math.ceil(containerWidth / (tileWidth + tileMargin));

  // Make only the desired number of tiles available for screen reader and keyboard users
  for (
    var i = leftMostTileIndex;
    i < leftMostTileIndex + numVisibleTiles;
    i++
  ) {
    if (i < tiles.length) {
      tiles[i].removeAttribute("aria-hidden");
      tiles[i].removeAttribute("tabindex");
    }
  }
}

/**
  NOTE: Dialog window for demo purposes only!
*/
function openDialog(e) {
  e.preventDefault();
  triggeringElement = e.target;
  dialog.classList.remove("is-hidden");
  dialogCloseButton.focus();
}

function closeDialog() {
  triggeringElement.focus();
  dialog.classList.add("is-hidden");
}

function handleDialogClicks(e) {
  if (!dialogOverlay.contains(e.target)) {
    closeDialog();
  }
}

function handleDialogKeypresses(e) {
  switch (e.key) {
    case "Escape":
      closeDialog();
      break;

    case "Tab":
      if (e.shiftKey && document.activeElement === dialogCloseButton) {
        e.preventDefault();
        dialogOkButton.focus();
      } else if (!e.shiftKey && document.activeElement === dialogOkButton) {
        e.preventDefault();
        dialogCloseButton.focus();
      }

      break;
  }
}

</script>

{% schema %}
  {
    "name": "Flickity Landing Men's",
    "tag": "section",
    "settings": [
{
      "type": "header",
      "content": "All Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 160,
      "step": 2,
      "unit": "px",
      "label": "Padding Top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 160,
      "step": 2,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 36
    }
]
  }
{% endschema %}